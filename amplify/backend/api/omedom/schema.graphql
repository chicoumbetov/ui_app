# enum Abonnement
# type AdresseType

# type Client
# type Compte

# type Bien
# enum TypeBien {
#enum TypeSociete

#type LigneBudget
# enum Frequence

# type InfoLocataire
# info Crédit   =>   type infoCredit

enum Abonnement {
 UnADeuxBiens
 TroisACinqbiens
 PlusDeCinqBiens
}

type AdresseType @model {
  id: ID!
  adresse: String!
  complementAdresse: String
  codePostal: Int!
  ville: String!
  pays: String!

  clientID: ID!
  client: Client @connection(fields: ["clientID"])
}

# Type Client  and Compte
# Client & AdresseType are connected by clientID
type Client @model {
  id: ID!
  userID: ID!
  nom: String!
  prenom: String!
  email: AWSEmail!
  motDePasse: String!
  numeroTel: AWSPhone!
  optIn: Boolean

  avatarUri: String
  dateNaissance: AWSDate
  abonnement: Abonnement
}

type Compte @model {
  id: ID!
  IBAN: String!
  bank: String!

  clientID: ID!
  client: Client @connection(fields: ["clientID"])
}



######  NOT PUSHED YET

#type Bien

type Bien @model
  @auth(rules: [
    {allow: owner, ownerField: "admins", operations: [ create, update, delete, read]]}
    {allow: owner, ownerField: "shared", operations:[read]}
]) {
  id: ID!
  nom: String!
  iconeUri: String!
  anneeAcquisition:  AWSDate
  typeBien: TypeBien

  nomPropre: Boolean

  societe:TypeSociete
  detention: Int

  lignesBudget: [LigneBudget] @connection(keyName: "byBienId", fields: ["id"])
  admins: [String!]!
  shared: [String!]
  adresse: CLientAdresse @connection(fields: ["adresseID"])
}

#type LigneBudget

type LigneBudget
@key(name: "byBienId", fields: ["bienId"])
@model(queries: null){
  id: ID!
  bienId: ID!
  typeLigneBudget: String
  montant: Int
  frequence: Frequence
  dateProchaineEcheance: Int

  infoCredit: InfoCredit @connection(fields: ["infoCreditID"])
  infoLocataire: InfoLocataire @connection(fields: ["infoLocataireID"])
}
# type InfoLocataire
type InfoLocataire
@key(name: "infoLocataireID", fields: ["ligneBudgetId"])
@model(queries: null){
  id: ID!
  ligneBudgetId: ID!
  montant: Int!
  charges: Int
  tauxGestion: Int
  nom: String
  prenom: String
  email: AWSEmail
  dateDebut: AWSDate
  dateFin: AWSDate
}

# info Crédit
type InfoCredit
@key(name: "infoCreditID", fields: ["ligneBudgetId"])
@model(queries: null){
  id: ID!
  ligneBudgetId: ID!
  capitalEmprunte: Int!
  dateDebutPret: AWSDate
  duree: String     # ???? Int
  tauxInteret: Int
  tauxAssurance: Int
}

enum TypeBien {
  residencePrincipale
  residenceSecondaire
  investissementLocatifProfessionnelOuCommercial
  investissementLocatifParticulier
}
enum TypeSociete {
  SCI
  SAS
  SARLclassique
  SARLfamille
}

enum Frequence {
 mensuelle
 bimensuelle
 trimestrielle
 annuelle
}
